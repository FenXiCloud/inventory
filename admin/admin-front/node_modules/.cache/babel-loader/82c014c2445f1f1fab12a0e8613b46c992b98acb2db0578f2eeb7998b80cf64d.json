{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\r\n * @功能描述: header\r\n * @创建时间: 2023年08月08日\r\n * @公司官网: www.fenxi365.com\r\n * @公司信息: 纷析云（杭州）科技有限公司\r\n * @公司介绍: 专注于财务相关软件开发, 企业会计自动化解决方案\r\n */\nimport { onMounted, onUnmounted } from 'vue';\nimport { loading, confirm } from \"heyui.ext\";\nimport { Logout } from \"@js/api/App\";\nexport default {\n  name: \"AppHead\",\n  data() {\n    return {\n      searchText: '',\n      infoMenu: [{\n        key: 'info',\n        title: '个人信息',\n        icon: 'h-icon-user'\n      }, {\n        key: 'logout',\n        title: '退出登录',\n        icon: 'h-icon-outbox'\n      }]\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n    siderCollapsed: {\n      get() {\n        return this.$store.state.siderCollapsed;\n      },\n      set(value) {\n        this.$store.commit('updateSiderCollapse', value);\n      }\n    }\n  },\n  setup(props, context) {\n    let resizeEvent = null;\n    onMounted(() => {\n      let windowWidth = window.innerWidth;\n      resizeEvent = window.addEventListener('resize', () => {\n        if (windowWidth == window.innerWidth) {\n          return;\n        }\n        if (context.siderCollapsed && window.innerWidth > 900) {\n          context.siderCollapsed = false;\n        } else if (!context.siderCollapsed && window.innerWidth < 900) {\n          context.siderCollapsed = true;\n        }\n        windowWidth = window.innerWidth;\n      });\n      window.dispatchEvent(new Event('resize'));\n    });\n    onUnmounted(() => {\n      window.removeEventListener('resize', resizeEvent);\n    });\n  },\n  methods: {\n    trigger(data) {\n      if (data === 'logout') {\n        confirm({\n          title: \"系统提示\",\n          content: '确认退出？',\n          onConfirm: () => {\n            loading(\"登出中....\");\n            Logout().then(() => {\n              localStorage.removeItem(\"SYS_TABS\");\n              this.$router.replace({\n                name: 'Login'\n              });\n            }).finally(() => loading.close());\n          }\n        });\n      } else {\n        this.$router.push({\n          name: 'AccountBasic'\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["onMounted","onUnmounted","loading","confirm","Logout","name","data","searchText","infoMenu","key","title","icon","computed","user","$store","state","siderCollapsed","get","set","value","commit","setup","props","context","resizeEvent","windowWidth","window","innerWidth","addEventListener","dispatchEvent","Event","removeEventListener","methods","trigger","content","onConfirm","then","localStorage","removeItem","$router","replace","finally","close","push"],"sources":["D:\\DevWorks\\jxc\\admin\\admin-front\\src\\components\\app\\AppHead.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-header\" style=\"position: absolute;bottom: 20px;left: 0;right: 0\">\r\n    <div class=\"app-header-info\" v-if=\"user\">\r\n      <span class=\"h-icon-user mr-10px\"></span>\r\n      <DropdownMenu\r\n          className=\"app-header-dropdown\"\r\n          trigger=\"hover\"\r\n          offset=\"5,5\"\r\n          :width=\"150\"\r\n          placement=\"bottom-end\"\r\n          :datas=\"infoMenu\"\r\n          @clickItem=\"trigger\"\r\n      >\r\n        <span>{{ user.name }}</span>\r\n      </DropdownMenu>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * @功能描述: header\r\n * @创建时间: 2023年08月08日\r\n * @公司官网: www.fenxi365.com\r\n * @公司信息: 纷析云（杭州）科技有限公司\r\n * @公司介绍: 专注于财务相关软件开发, 企业会计自动化解决方案\r\n */\r\nimport {onMounted, onUnmounted} from 'vue';\r\nimport {loading, confirm} from \"heyui.ext\";\r\nimport {Logout} from \"@js/api/App\";\r\n\r\nexport default {\r\n  name: \"AppHead\",\r\n  data() {\r\n    return {\r\n      searchText: '',\r\n      infoMenu: [\r\n        {key: 'info', title: '个人信息', icon: 'h-icon-user'},\r\n        {key: 'logout', title: '退出登录', icon: 'h-icon-outbox'}\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    user() {\r\n      return this.$store.state.user;\r\n    },\r\n    siderCollapsed: {\r\n      get() {\r\n        return this.$store.state.siderCollapsed;\r\n      },\r\n      set(value) {\r\n        this.$store.commit('updateSiderCollapse', value);\r\n      }\r\n    }\r\n  },\r\n  setup(props, context) {\r\n    let resizeEvent = null;\r\n    onMounted(() => {\r\n      let windowWidth = window.innerWidth;\r\n      resizeEvent = window.addEventListener('resize', () => {\r\n        if (windowWidth == window.innerWidth) {\r\n          return;\r\n        }\r\n        if (context.siderCollapsed && window.innerWidth > 900) {\r\n          context.siderCollapsed = false;\r\n        } else if (!context.siderCollapsed && window.innerWidth < 900) {\r\n          context.siderCollapsed = true;\r\n        }\r\n        windowWidth = window.innerWidth;\r\n      });\r\n      window.dispatchEvent(new Event('resize'));\r\n    });\r\n    onUnmounted(() => {\r\n      window.removeEventListener('resize', resizeEvent);\r\n    });\r\n  },\r\n  methods: {\r\n    trigger(data) {\r\n      if (data === 'logout') {\r\n        confirm({\r\n          title: \"系统提示\",\r\n          content: '确认退出？',\r\n          onConfirm: () => {\r\n            loading(\"登出中....\");\r\n            Logout().then(() => {\r\n              localStorage.removeItem(\"SYS_TABS\");\r\n              this.$router.replace({name: 'Login'});\r\n            }).finally(() => loading.close())\r\n          }\r\n        });\r\n      } else {\r\n        this.$router.push({name: 'AccountBasic'});\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.app-header {\r\n  color: #fff;\r\n  margin-top: 20px;\r\n  text-align: center;\r\n\r\n}\r\n</style>\r\n"],"mappings":";AAoBA;;;;;;;AAOA,SAAQA,SAAS,EAAEC,WAAW,QAAO,KAAK;AAC1C,SAAQC,OAAO,EAAEC,OAAO,QAAO,WAAW;AAC1C,SAAQC,MAAM,QAAO,aAAa;AAElC,eAAe;EACbC,IAAI,EAAE,SAAS;EACfC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,EAAE;MACdC,QAAQ,EAAE,CACR;QAACC,GAAG,EAAE,MAAM;QAAEC,KAAK,EAAE,MAAM;QAAEC,IAAI,EAAE;MAAa,CAAC,EACjD;QAACF,GAAG,EAAE,QAAQ;QAAEC,KAAK,EAAE,MAAM;QAAEC,IAAI,EAAE;MAAe;IAExD,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,IAAIA,CAAA,EAAG;MACL,OAAO,IAAI,CAACC,MAAM,CAACC,KAAK,CAACF,IAAI;IAC/B,CAAC;IACDG,cAAc,EAAE;MACdC,GAAGA,CAAA,EAAG;QACJ,OAAO,IAAI,CAACH,MAAM,CAACC,KAAK,CAACC,cAAc;MACzC,CAAC;MACDE,GAAGA,CAACC,KAAK,EAAE;QACT,IAAI,CAACL,MAAM,CAACM,MAAM,CAAC,qBAAqB,EAAED,KAAK,CAAC;MAClD;IACF;EACF,CAAC;EACDE,KAAKA,CAACC,KAAK,EAAEC,OAAO,EAAE;IACpB,IAAIC,WAAU,GAAI,IAAI;IACtBxB,SAAS,CAAC,MAAM;MACd,IAAIyB,WAAU,GAAIC,MAAM,CAACC,UAAU;MACnCH,WAAU,GAAIE,MAAM,CAACE,gBAAgB,CAAC,QAAQ,EAAE,MAAM;QACpD,IAAIH,WAAU,IAAKC,MAAM,CAACC,UAAU,EAAE;UACpC;QACF;QACA,IAAIJ,OAAO,CAACP,cAAa,IAAKU,MAAM,CAACC,UAAS,GAAI,GAAG,EAAE;UACrDJ,OAAO,CAACP,cAAa,GAAI,KAAK;QAChC,OAAO,IAAI,CAACO,OAAO,CAACP,cAAa,IAAKU,MAAM,CAACC,UAAS,GAAI,GAAG,EAAE;UAC7DJ,OAAO,CAACP,cAAa,GAAI,IAAI;QAC/B;QACAS,WAAU,GAAIC,MAAM,CAACC,UAAU;MACjC,CAAC,CAAC;MACFD,MAAM,CAACG,aAAa,CAAC,IAAIC,KAAK,CAAC,QAAQ,CAAC,CAAC;IAC3C,CAAC,CAAC;IACF7B,WAAW,CAAC,MAAM;MAChByB,MAAM,CAACK,mBAAmB,CAAC,QAAQ,EAAEP,WAAW,CAAC;IACnD,CAAC,CAAC;EACJ,CAAC;EACDQ,OAAO,EAAE;IACPC,OAAOA,CAAC3B,IAAI,EAAE;MACZ,IAAIA,IAAG,KAAM,QAAQ,EAAE;QACrBH,OAAO,CAAC;UACNO,KAAK,EAAE,MAAM;UACbwB,OAAO,EAAE,OAAO;UAChBC,SAAS,EAAEA,CAAA,KAAM;YACfjC,OAAO,CAAC,SAAS,CAAC;YAClBE,MAAM,CAAC,CAAC,CAACgC,IAAI,CAAC,MAAM;cAClBC,YAAY,CAACC,UAAU,CAAC,UAAU,CAAC;cACnC,IAAI,CAACC,OAAO,CAACC,OAAO,CAAC;gBAACnC,IAAI,EAAE;cAAO,CAAC,CAAC;YACvC,CAAC,CAAC,CAACoC,OAAO,CAAC,MAAMvC,OAAO,CAACwC,KAAK,CAAC,CAAC;UAClC;QACF,CAAC,CAAC;MACJ,OAAO;QACL,IAAI,CAACH,OAAO,CAACI,IAAI,CAAC;UAACtC,IAAI,EAAE;QAAc,CAAC,CAAC;MAC3C;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}