{"ast":null,"code":"import AppHead from \"@components/app/AppHead\";\nimport AppMenu from \"@components/app/AppMenu\";\nimport AppFooter from \"@components/app/AppFooter\";\nimport SysTabs from \"@components/common/sys-tabs\";\nimport { mapState } from \"vuex\";\nimport { fullMenuKeys, isAuthPage } from \"@js/config/menu-config\";\nimport { loading } from \"heyui.ext\";\nimport { Init } from \"@js/api/App\";\n\n/**\r\n * @功能描述: appFrame\r\n * @创建时间: 2023年08月08日\r\n * @公司官网: www.fenxi365.com\r\n * @公司信息: 纷析云（杭州）科技有限公司\r\n * @公司介绍: 专注于财务相关软件开发, 企业会计自动化解决方案\r\n */\nexport default {\n  name: \"AppFrame\",\n  components: {\n    SysTabs,\n    AppFooter,\n    AppMenu,\n    AppHead\n  },\n  computed: {\n    ...mapState(['siderCollapsed', 'menus'])\n  },\n  data() {\n    return {\n      loading: false\n    };\n  },\n  methods: {\n    init() {\n      this.loading = true;\n      loading('加载中');\n      Init().then(({\n        data\n      }) => {\n        this.$store.dispatch('updateAccount', data);\n        this.initMenu();\n        this.loading = false;\n      }).catch(() => {\n        this.$router.replace({\n          name: 'Login'\n        });\n      }).finally(() => loading.close());\n    },\n    initMenu() {\n      // 如果使用权限配置，配合后端获取请求的数据\n      // Request.Account.menus().then(resp => {\n      //   if (resp.ok) {\n      //     this.menus = getMenus(resp.body);\n      //     this.menuSelect();\n      //   }\n      // });\n      let menuKeys = fullMenuKeys;\n      this.$store.dispatch('updateMenuKeys', menuKeys);\n      if (!isAuthPage(menuKeys, this.$route.name)) {\n        this.$router.replace({\n          name: 'PermissionError'\n        });\n      }\n    }\n  },\n  created() {\n    // 如果无后台数据，将此处屏蔽\n    this.init();\n  }\n};","map":{"version":3,"names":["AppHead","AppMenu","AppFooter","SysTabs","mapState","fullMenuKeys","isAuthPage","loading","Init","name","components","computed","data","methods","init","then","$store","dispatch","initMenu","catch","$router","replace","finally","close","menuKeys","$route","created"],"sources":["D:\\DevWorks\\jxc\\admin\\admin-front\\src\\components\\app\\AppFrame.vue"],"sourcesContent":["<template>\r\n  <Layout class=\"app-frame\" v-if=\"!loading\" :siderCollapsed=\"siderCollapsed\" siderFixed>\r\n    <Sider theme=\"dark\">\r\n      <AppMenu theme=\"dark\"/>\r\n    </Sider>\r\n    <Layout headerFixed>\r\n      <SysTabs homePage=\"DashboardMain\"/>\r\n      <Content>\r\n        <div class=\"app-frame-content\">\r\n          <router-view/>\r\n        </div>\r\n        <HFooter>\r\n          <AppFooter/>\r\n        </HFooter>\r\n      </Content>\r\n    </Layout>\r\n  </Layout>\r\n</template>\r\n\r\n<script>\r\nimport AppHead from \"@components/app/AppHead\";\r\nimport AppMenu from \"@components/app/AppMenu\";\r\nimport AppFooter from \"@components/app/AppFooter\";\r\nimport SysTabs from \"@components/common/sys-tabs\";\r\nimport {mapState} from \"vuex\";\r\nimport {fullMenuKeys, isAuthPage} from \"@js/config/menu-config\";\r\nimport {loading} from \"heyui.ext\";\r\nimport {Init} from \"@js/api/App\";\r\n\r\n/**\r\n * @功能描述: appFrame\r\n * @创建时间: 2023年08月08日\r\n * @公司官网: www.fenxi365.com\r\n * @公司信息: 纷析云（杭州）科技有限公司\r\n * @公司介绍: 专注于财务相关软件开发, 企业会计自动化解决方案\r\n */\r\nexport default {\r\n  name: \"AppFrame\",\r\n  components: {SysTabs, AppFooter, AppMenu, AppHead},\r\n  computed: {\r\n    ...mapState(['siderCollapsed', 'menus'])\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false\r\n    }\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.loading = true;\r\n      loading('加载中');\r\n      Init().then(({data}) => {\r\n        this.$store.dispatch('updateAccount', data);\r\n        this.initMenu();\r\n        this.loading = false;\r\n      }).catch(() => {\r\n        this.$router.replace({name: 'Login'});\r\n      }).finally(() => loading.close());\r\n    },\r\n    initMenu() {\r\n      // 如果使用权限配置，配合后端获取请求的数据\r\n      // Request.Account.menus().then(resp => {\r\n      //   if (resp.ok) {\r\n      //     this.menus = getMenus(resp.body);\r\n      //     this.menuSelect();\r\n      //   }\r\n      // });\r\n      let menuKeys = fullMenuKeys;\r\n      this.$store.dispatch('updateMenuKeys', menuKeys);\r\n      if (!isAuthPage(menuKeys, this.$route.name)) {\r\n        this.$router.replace({name: 'PermissionError'});\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    // 如果无后台数据，将此处屏蔽\r\n    this.init();\r\n  }\r\n}\r\n</script>\r\n<style>\r\n\r\n.app-frame-content{\r\n  margin: 10px;\r\n}\r\n</style>\r\n"],"mappings":"AAoBA,OAAOA,OAAM,MAAO,yBAAyB;AAC7C,OAAOC,OAAM,MAAO,yBAAyB;AAC7C,OAAOC,SAAQ,MAAO,2BAA2B;AACjD,OAAOC,OAAM,MAAO,6BAA6B;AACjD,SAAQC,QAAQ,QAAO,MAAM;AAC7B,SAAQC,YAAY,EAAEC,UAAU,QAAO,wBAAwB;AAC/D,SAAQC,OAAO,QAAO,WAAW;AACjC,SAAQC,IAAI,QAAO,aAAa;;AAEhC;;;;;;;AAOA,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IAACP,OAAO;IAAED,SAAS;IAAED,OAAO;IAAED;EAAO,CAAC;EAClDW,QAAQ,EAAE;IACR,GAAGP,QAAQ,CAAC,CAAC,gBAAgB,EAAE,OAAO,CAAC;EACzC,CAAC;EACDQ,IAAIA,CAAA,EAAG;IACL,OAAO;MACLL,OAAO,EAAE;IACX;EACF,CAAC;EACDM,OAAO,EAAE;IACPC,IAAIA,CAAA,EAAG;MACL,IAAI,CAACP,OAAM,GAAI,IAAI;MACnBA,OAAO,CAAC,KAAK,CAAC;MACdC,IAAI,CAAC,CAAC,CAACO,IAAI,CAAC,CAAC;QAACH;MAAI,CAAC,KAAK;QACtB,IAAI,CAACI,MAAM,CAACC,QAAQ,CAAC,eAAe,EAAEL,IAAI,CAAC;QAC3C,IAAI,CAACM,QAAQ,CAAC,CAAC;QACf,IAAI,CAACX,OAAM,GAAI,KAAK;MACtB,CAAC,CAAC,CAACY,KAAK,CAAC,MAAM;QACb,IAAI,CAACC,OAAO,CAACC,OAAO,CAAC;UAACZ,IAAI,EAAE;QAAO,CAAC,CAAC;MACvC,CAAC,CAAC,CAACa,OAAO,CAAC,MAAMf,OAAO,CAACgB,KAAK,CAAC,CAAC,CAAC;IACnC,CAAC;IACDL,QAAQA,CAAA,EAAG;MACT;MACA;MACA;MACA;MACA;MACA;MACA;MACA,IAAIM,QAAO,GAAInB,YAAY;MAC3B,IAAI,CAACW,MAAM,CAACC,QAAQ,CAAC,gBAAgB,EAAEO,QAAQ,CAAC;MAChD,IAAI,CAAClB,UAAU,CAACkB,QAAQ,EAAE,IAAI,CAACC,MAAM,CAAChB,IAAI,CAAC,EAAE;QAC3C,IAAI,CAACW,OAAO,CAACC,OAAO,CAAC;UAACZ,IAAI,EAAE;QAAiB,CAAC,CAAC;MACjD;IACF;EACF,CAAC;EACDiB,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACZ,IAAI,CAAC,CAAC;EACb;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}