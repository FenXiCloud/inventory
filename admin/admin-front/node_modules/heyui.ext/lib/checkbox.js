import n from"./utils/config.js";import{u as i}from"./utils.js";import{openBlock as r,createElementBlock as h,normalizeClass as u,Fragment as k,renderList as f,toDisplayString as g,renderSlot as o,createCommentVNode as b,createElementVNode as m}from"vue";import{_ as p}from"./_plugin-vue_export-helper.js";import v from"./mixins/locale.js";import"./plugins/popper.js";import y from"./plugins/message.js";import"./datepicker.js";import"manba";import"./datebase.js";import"./plugins/validator/validation/typeValids.js";import"./notice.js";import"./plugins/autosize.js";import"./plugins/modal.js";import"./plugins/confirm.js";import"./plugins/notice.js";import"./plugins/loading.js";import"./plugins/loading-bar.js";const x={name:"HCheckbox",mixins:[v],emits:["input","change","update:modelValue"],props:{dict:String,datas:[Object,Array],disabled:{type:Boolean,default:!1},value:[Object,Number,String],checked:{type:Boolean},modelValue:[Array,Boolean,Object,Number,String],indeterminate:{type:Boolean,default:!1},keyName:{type:String,default:()=>n.getOption("dict","keyName")},titleName:{type:String,default:()=>n.getOption("dict","titleName")},limit:Number,trueValue:{default:!0},falseValue:{default:!1}},data(){return{key:this.keyName,title:this.titleName}},computed:{checkList(){let e=this.modelValue||[];return(!i.isNull(this.value)||!this.isSingle)&&!i.isArray(e)&&console.warn("[HeyUI WARNING] Checkbox Component: It's not allowed to use v-model with non-array value."),i.isArray(e)?e:[]},isSingle(){return this.arr.length==0},arr(){if(!this.datas&&!this.dict)return[];let e=this.datas;return this.dict&&(e=n.getDict(this.dict)),n.initOptions(e,this)},isSingleChecked(){return this.isSingle?i.isNull(this.value)?this.checked===!0?this.checked:this.modelValue===this.trueValue?!0:(this.modelValue===this.falseValue,!1):this.checkList.indexOf(this.value)!==-1:!1}},methods:{setvalue(e){if(this.disabled||e&&e.disabled)return;let t=null;if(this.isSingle)i.isNull(this.value)?i.isNull(this.modelValue)?this.checked===!0?t=this.checked:t=this.isSingleChecked?this.falseValue:this.trueValue:t=this.isSingleChecked?this.falseValue:this.trueValue:t=i.toggleValue(this.checkList,this.value);else{t=i.copy(this.modelValue);let c=e[this.key];if(t=i.toggleValue(t,c),this.limit&&this.limit<t.length){y.error(this.hlang("h.checkbox.limitSize",{limitSize:this.limit}));return}}this.$emit("change",t),this.$emit("input",t),this.$emit("update:modelValue",t);let l=document.createEvent("CustomEvent");l.initCustomEvent("setvalue",!0,!0,t),this.$el.dispatchEvent(l)},check(e){return this.checkList.map(l=>String(l)).indexOf(String(e))},isInclude(e){return this.checkList.map(c=>String(c)).indexOf(String(e[this.key]))>-1}}},S=["onClick"],V=m("span",{class:"h-checkbox-native"},null,-1),C={key:0,class:"h-checkbox-text"},N=m("span",{class:"h-checkbox-native"},null,-1),_={key:0,class:"h-checkbox-text"};function O(e,t,l,c,d,s){return r(),h("div",{class:u(["h-checkbox",{"h-checkbox-disabled":l.disabled,"h-checkbox-single":s.isSingle}])},[s.isSingle?(r(),h("label",{key:1,class:u({"h-checkbox-label":!0,"h-checkbox-checked":s.isSingleChecked,"h-checkbox-indeterminate":!s.isSingleChecked&&l.indeterminate}),onClick:t[0]||(t[0]=a=>s.setvalue())},[N,e.$slots.default?(r(),h("span",_,[o(e.$slots,"default")])):b("",!0)],2)):(r(!0),h(k,{key:0},f(s.arr,a=>(r(),h("label",{key:a[d.key],class:u({"h-checkbox-label":!0,"h-checkbox-checked":s.isInclude(a),"h-checkbox-item-disabled":a.disabled,"h-checkbox-indeterminate":a.indeterminate}),onClick:L=>s.setvalue(a)},[V,e.$slots.item?o(e.$slots,"item",{key:1,item:a}):(r(),h("span",C,g(a[d.title]),1))],10,S))),128))],2)}const M=p(x,[["render",O]]);export{M as C};
