const g="COMPLETE",m="CANCELED";function C(l){if("requestAnimationFrame"in window)return window.requestAnimationFrame(l);setTimeout(l,16)}function O(l,t,e){l===window?l.scrollTo(t,e):(l.scrollLeft=t,l.scrollTop=e)}function H(l,t,e){let i=l.getBoundingClientRect(),f=null,o=null,n=null,c=null,r=null,u=null,d=null,p=e&&e.left!=null?e.left:.5,S=e&&e.top!=null?e.top:.5,a=e&&e.leftOffset!=null?e.leftOffset:0,h=e&&e.topOffset!=null?e.topOffset:0,s=p,w=S;if(t===window)u=Math.min(i.width,window.innerWidth),d=Math.min(i.height,window.innerHeight),o=i.left+window.pageXOffset-window.innerWidth*s+u*s,n=i.top+window.pageYOffset-window.innerHeight*w+d*w,o-=a,n-=h,c=o-window.pageXOffset,r=n-window.pageYOffset;else{u=i.width,d=i.height,f=t.getBoundingClientRect();let L=i.left-(f.left-t.scrollLeft),M=i.top-(f.top-t.scrollTop);o=L+u*s-t.clientWidth*s,n=M+d*w-t.clientHeight*w,o=Math.max(Math.min(o,t.scrollWidth-t.clientWidth),0),n=Math.max(Math.min(n,t.scrollHeight-t.clientHeight),0),o-=a,n-=h,c=o-t.scrollLeft,r=n-t.scrollTop}return{x:o,y:n,differenceX:c,differenceY:r}}function T(l){C(function(){let t=l.scrollOption;if(!t)return;let e=H(t.target,l,t.align),i=Date.now()-t.startTime,f=Math.min(1/t.time*i,1);if(i>t.time+20)return O(l,e.x,e.y),l.scrollOption=null,t.end(g);let o=1-t.ease(f);O(l,e.x-e.differenceX*o,e.y-e.differenceY*o),T(l)})}function W(l,t,e,i){let f=!t.scrollOption,o=t.scrollOption,n=Date.now(),c;o&&o.end(m);function r(u){t.scrollOption=null,t.parentElement&&t.parentElement.scrollOption&&t.parentElement.scrollOption.end(u),i(u),t.removeEventListener("touchstart",c)}t.scrollOption={startTime:o?o.startTime:Date.now(),target:l,time:e.time+(o?n-o.startTime:0),ease:e.ease,align:e.align,end:r},c=r.bind(null,m),t.addEventListener("touchstart",c),f&&T(t)}function E(l){return l===window||(l.scrollHeight!==l.clientHeight||l.scrollWidth!==l.clientWidth)&&getComputedStyle(l).overflow!=="hidden"}function A(){return!0}function D(l,t,e){if(!l)return;typeof t=="function"&&(e=t,t=null),t||(t={}),t.time=isNaN(t.time)?1e3:t.time,t.ease=t.ease||function(r){return 1-Math.pow(1-r,r/2)};let i=l.parentElement,f=0;function o(r){f-=1,!f&&e&&e(r)}let n=t.validTarget||A,c=t.isScrollable;for(;i;){if(n(i,f)&&(c?c(i,E):E(i))&&(f+=1,W(l,i,t,o)),i=i.parentElement,!i)return;i.tagName==="BODY"&&(i=window)}}export{D as default};
