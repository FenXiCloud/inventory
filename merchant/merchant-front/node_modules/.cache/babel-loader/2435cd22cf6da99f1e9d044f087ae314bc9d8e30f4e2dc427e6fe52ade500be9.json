{"ast":null,"code":"import { mapMutations, mapState } from \"vuex\";\nexport default {\n  name: 'TagsNav',\n  props: {\n    value: Object,\n    homePage: {\n      type: String,\n      default: 'DashboardMain'\n    }\n  },\n  data() {\n    return {\n      nowIndex: null,\n      menus: {}\n    };\n  },\n  computed: {\n    ...mapState(['tabs', 'currentTab'])\n  },\n  methods: {\n    ...mapMutations(['updateTab', 'clearTabs', 'closeOtherTab', 'closeSelfTab']),\n    show(event) {\n      let parent = event.target.parentNode;\n      this.nowIndex = parent.getAttribute('index') || parent.parentNode.getAttribute('index');\n      if (this.nowIndex == null) {\n        this.menus = {\n          closeAll: '关闭所有标签页'\n        };\n      } else {\n        this.menus = {\n          closeSelf: '关闭标签页',\n          closeOther: '关闭其他标签页',\n          closeAll: '关闭所有标签页'\n        };\n      }\n    },\n    trigger(key) {\n      if (key === 'closeAll') {\n        this.clearTabs();\n      } else if (this.nowIndex) {\n        if (key === 'closeOther') {\n          this.closeOtherTab(this.nowIndex);\n        } else if (key === 'closeSelf') {\n          this.closeSelfTab(this.nowIndex);\n        }\n      }\n    },\n    handleClose(item, index) {\n      this.closeSelfTab(index);\n    },\n    handleClick(item) {\n      this.updateTab(item.key);\n    }\n  }\n};","map":{"version":3,"names":["mapMutations","mapState","name","props","value","Object","homePage","type","String","default","data","nowIndex","menus","computed","methods","show","event","parent","target","parentNode","getAttribute","closeAll","closeSelf","closeOther","trigger","key","clearTabs","closeOtherTab","closeSelfTab","handleClose","item","index","handleClick","updateTab"],"sources":["D:\\DevWorks\\jxc\\merchant\\merchant-front\\src\\views\\common\\sys-tabs\\sys-tabs.vue"],"sourcesContent":["<template>\r\n  <div class=\"sys-tabs-vue\" :class=\"{ 'sys-tabs-oversize': tabs.length > 15 }\">\r\n    <div class=\"tabs-container\" ref=\"scrollOuter\">\r\n      <div class=\"tabs-body\">\r\n        <DropdownMenu :datas=\"menus\" @clickItem=\"trigger\" @show=\"show\" trigger=\"contextMenu\" :toggleIcon=\"false\">\r\n          <div @click=\"updateTab('DashboardMain')\" class=\"tabs-item\" :class=\"{ 'tabs-item-chosen': currentTab=== 'DashboardMain' }\">\r\n            <div class=\"tabs-item-background\"></div>\r\n            <div class=\"tabs-item-title\">\r\n              <span class=\"tabs-item-icon icon-monitor\"></span>\r\n              <span>桌面</span>\r\n            </div>\r\n          </div>\r\n          <div v-for=\"(item, index) of tabs\"\r\n               :key=\"`sys-tab-${index}`\"\r\n               :index=\"index\"\r\n               @click=\"handleClick(item)\"\r\n               class=\"tabs-item\"\r\n               :class=\"{ 'tabs-item-chosen': currentTab=== item.key }\">\r\n            <div class=\"tabs-item-background\"></div>\r\n            <div class=\"tabs-item-title\">\r\n              <span :class=\"item.icon\" v-if=\"item.icon\" class=\"tabs-item-icon\"></span>\r\n              <span>{{ item.title }}</span>\r\n            </div>\r\n            <span class=\"tabs-item-close h-icon-close\" @click.stop=\"handleClose(item,index)\"></span>\r\n          </div>\r\n        </DropdownMenu>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapMutations, mapState} from \"vuex\";\r\n\r\nexport default {\r\n  name: 'TagsNav',\r\n  props: {\r\n    value: Object,\r\n    homePage: {\r\n      type: String,\r\n      default: 'DashboardMain'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      nowIndex: null,\r\n      menus: {}\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(['tabs', 'currentTab']),\r\n  },\r\n  methods: {\r\n    ...mapMutations(['updateTab', 'clearTabs', 'closeOtherTab', 'closeSelfTab']),\r\n    show(event) {\r\n      let parent = event.target.parentNode;\r\n      this.nowIndex = parent.getAttribute('index') || parent.parentNode.getAttribute('index');\r\n      if (this.nowIndex == null) {\r\n        this.menus = {\r\n          closeAll: '关闭所有标签页'\r\n        };\r\n      } else {\r\n        this.menus = {\r\n          closeSelf: '关闭标签页',\r\n          closeOther: '关闭其他标签页',\r\n          closeAll: '关闭所有标签页'\r\n        };\r\n      }\r\n    },\r\n    trigger(key) {\r\n      if (key === 'closeAll') {\r\n        this.clearTabs();\r\n      } else if (this.nowIndex) {\r\n        if (key === 'closeOther') {\r\n          this.closeOtherTab(this.nowIndex);\r\n        } else if (key === 'closeSelf') {\r\n          this.closeSelfTab(this.nowIndex);\r\n        }\r\n      }\r\n    },\r\n    handleClose(item, index) {\r\n      this.closeSelfTab(index);\r\n    },\r\n    handleClick(item) {\r\n      this.updateTab(item.key)\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.sys-tabs-vue {\r\n  position: relative;\r\n  background: #fff;\r\n  user-select: none;\r\n  z-index: 1;\r\n  height: 40px;\r\n\r\n  .close-con {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    height: 100%;\r\n    width: 32px;\r\n    background: #fff;\r\n    text-align: center;\r\n    z-index: 10;\r\n  }\r\n\r\n  .tabs-container {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n\r\n\r\n    .tabs-body {\r\n      height: 100%;\r\n      //box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.09);\r\n      padding: 0px 0 0;\r\n\r\n\r\n      .h-dropdownmenu {\r\n        display: block;\r\n      }\r\n\r\n      .h-dropdowncustom-show-content {\r\n        overflow: hidden;\r\n        padding: 0 8px;\r\n        white-space: nowrap;\r\n        display: flex;\r\n      }\r\n    }\r\n\r\n    .tabs-item {\r\n      transition: 0.2s;\r\n      line-height: @sys-tabs-height - 9px;\r\n      height: @sys-tabs-height - 10px;\r\n      padding: 0 15px 0 15px;\r\n      position: relative;\r\n      max-width: 120px;\r\n      flex: 1;\r\n      margin-left: -4px;\r\n      margin-right: -4px;\r\n      cursor: pointer;\r\n      overflow: hidden;\r\n\r\n\r\n      &:after {\r\n        content: '';\r\n        display: inline-block;\r\n        position: absolute;\r\n        right: 0;\r\n        height: 20px;\r\n        bottom: 6px;\r\n        //border-right: 1px solid #b5b5b5;\r\n      }\r\n\r\n      &-title {\r\n        position: relative;\r\n        z-index: 2;\r\n        font-size: 14px;\r\n        overflow: hidden;\r\n        margin-right: 15px;\r\n\r\n\r\n        .tabs-item-icon {\r\n          margin-right: 5px;\r\n          position: relative;\r\n          top: -1px;\r\n        }\r\n      }\r\n\r\n      &-background {\r\n        color: #ebecef;\r\n        position: absolute;\r\n        right: 4px;\r\n        top: 0;\r\n        left: 3px;\r\n        bottom: 0;\r\n        border-top: #e6e7ea 1px solid;\r\n        /* 确保其他边框不可见 */\r\n        border-right: #e6e7ea 1px solid;\r\n        border-bottom: #e6e7ea 1px solid;\r\n        border-left: #e6e7ea 1px solid;\r\n        //border-radius: 3px 3px 0 0;\r\n      }\r\n\r\n      &.tabs-item-chosen,\r\n      &:hover {\r\n        z-index: 1;\r\n\r\n        &:after,\r\n        &:before {\r\n          content: '';\r\n          bottom: 0;\r\n          position: absolute;\r\n          top: auto;\r\n          border-right: none;\r\n        }\r\n\r\n        &:after {\r\n          width: 0;\r\n          height: 0;\r\n          //border-right: 1px solid transparent;\r\n          right: 0px;\r\n          z-index: 3;\r\n        }\r\n\r\n        &:before {\r\n          width: 0;\r\n          height: 0;\r\n          //border-left: 1px solid transparent;\r\n          left: 0px;\r\n          z-index: 3;\r\n        }\r\n      }\r\n\r\n      @sysTabHoverColor: #ebecef;\r\n\r\n      &:hover {\r\n        .tabs-item-background {\r\n          background: @sysTabHoverColor;\r\n        }\r\n\r\n        &:after {\r\n          border-bottom: 1px solid @sysTabHoverColor;\r\n        }\r\n\r\n        &:before {\r\n          border-bottom: 1px solid @sysTabHoverColor;\r\n        }\r\n      }\r\n\r\n      &.tabs-item-chosen {\r\n        z-index: 2;\r\n\r\n        .tabs-item-background {\r\n          background: #f5f7fa;\r\n          border-top: #3d74ff 2px solid;\r\n          border-bottom: none;\r\n        }\r\n\r\n        &:after {\r\n          border-bottom: 10px solid #fff;\r\n        }\r\n\r\n        &:before {\r\n          border-bottom: 10px solid #fff;\r\n        }\r\n      }\r\n\r\n      &-close {\r\n        transition: 0.2s;\r\n        font-size: 12px;\r\n        position: absolute;\r\n        right: 10px;\r\n        color: #999;\r\n        cursor: pointer;\r\n        border-radius: 50%;\r\n        padding: 4px;\r\n        top: 50%;\r\n        margin-top: -9px;\r\n        transform: scale(0.8);\r\n\r\n        &:hover {\r\n          color: @gray4-color;\r\n          background: @dark4-color;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  &.sys-tabs-oversize {\r\n    .tabs-item:not(.tabs-item-chosen) {\r\n      padding-right: 10px;\r\n\r\n      .tabs-item-close {\r\n        display: none;\r\n      }\r\n\r\n      .tabs-item-title {\r\n        margin-right: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n"],"mappings":"AAgCA,SAAQA,YAAY,EAAEC,QAAQ,QAAO,MAAM;AAE3C,eAAe;EACbC,IAAI,EAAE,SAAS;EACfC,KAAK,EAAE;IACLC,KAAK,EAAEC,MAAM;IACbC,QAAQ,EAAE;MACRC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,CAAC;IACV,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGZ,QAAQ,CAAC,CAAC,MAAM,EAAE,YAAY,CAAC;EACpC,CAAC;EACDa,OAAO,EAAE;IACP,GAAGd,YAAY,CAAC,CAAC,WAAW,EAAE,WAAW,EAAE,eAAe,EAAE,cAAc,CAAC,CAAC;IAC5Ee,IAAIA,CAACC,KAAK,EAAE;MACV,IAAIC,MAAK,GAAID,KAAK,CAACE,MAAM,CAACC,UAAU;MACpC,IAAI,CAACR,QAAO,GAAIM,MAAM,CAACG,YAAY,CAAC,OAAO,KAAKH,MAAM,CAACE,UAAU,CAACC,YAAY,CAAC,OAAO,CAAC;MACvF,IAAI,IAAI,CAACT,QAAO,IAAK,IAAI,EAAE;QACzB,IAAI,CAACC,KAAI,GAAI;UACXS,QAAQ,EAAE;QACZ,CAAC;MACH,OAAO;QACL,IAAI,CAACT,KAAI,GAAI;UACXU,SAAS,EAAE,OAAO;UAClBC,UAAU,EAAE,SAAS;UACrBF,QAAQ,EAAE;QACZ,CAAC;MACH;IACF,CAAC;IACDG,OAAOA,CAACC,GAAG,EAAE;MACX,IAAIA,GAAE,KAAM,UAAU,EAAE;QACtB,IAAI,CAACC,SAAS,CAAC,CAAC;MAClB,OAAO,IAAI,IAAI,CAACf,QAAQ,EAAE;QACxB,IAAIc,GAAE,KAAM,YAAY,EAAE;UACxB,IAAI,CAACE,aAAa,CAAC,IAAI,CAAChB,QAAQ,CAAC;QACnC,OAAO,IAAIc,GAAE,KAAM,WAAW,EAAE;UAC9B,IAAI,CAACG,YAAY,CAAC,IAAI,CAACjB,QAAQ,CAAC;QAClC;MACF;IACF,CAAC;IACDkB,WAAWA,CAACC,IAAI,EAAEC,KAAK,EAAE;MACvB,IAAI,CAACH,YAAY,CAACG,KAAK,CAAC;IAC1B,CAAC;IACDC,WAAWA,CAACF,IAAI,EAAE;MAChB,IAAI,CAACG,SAAS,CAACH,IAAI,CAACL,GAAG;IACzB;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}