{"ast":null,"code":"import { confirm, message } from \"heyui.ext\";\nimport { layer } from \"@layui/layer-vue\";\nimport { h } from \"vue\";\nimport { downloadBlob } from \"download.js\";\nimport ProductCategory from \"@js/api/ProductCategory\";\nimport ProductCategoryForm from \"@views/basic/ProductCategoryForm.vue\";\nexport default {\n  name: \"ProductCategory\",\n  props: {\n    merchant: Object\n  },\n  data() {\n    return {\n      opened: true,\n      loading: false,\n      params: {\n        name: null\n      },\n      checkedRows: [],\n      dataList: [],\n      merchantList: []\n    };\n  },\n  computed: {\n    queryParams() {\n      return Object.assign(this.params, {});\n    }\n  },\n  methods: {\n    download() {},\n    showForm(productsCategory, parent) {\n      let layerId = layer.open({\n        title: \"分类信息\",\n        shadeClose: false,\n        area: ['450px', '420px'],\n        content: h(ProductsCategoryForm, {\n          productsCategory,\n          parent,\n          list: this.dataList,\n          onClose: () => {\n            layer.close(layerId);\n          },\n          onSuccess: () => {\n            this.doSearch();\n            layer.close(layerId);\n          }\n        })\n      });\n    },\n    loadList() {\n      this.loading = true;\n      ProductsCategory.list(this.queryParams).then(({\n        data\n      }) => {\n        this.dataList = data;\n      }).finally(() => this.loading = false);\n    },\n    doSearch() {\n      this.loadList();\n    },\n    doRemove(row) {\n      confirm({\n        title: \"系统提示\",\n        content: `确认删除：${row.name}?`,\n        onConfirm: () => {\n          ProductsCategory.remove(row.id).then(() => {\n            message(\"删除成功~\");\n            this.doSearch();\n          });\n        }\n      });\n    },\n    init() {}\n  },\n  created() {\n    this.init();\n    this.doSearch();\n  }\n};","map":{"version":3,"names":["confirm","message","layer","h","downloadBlob","ProductCategory","ProductCategoryForm","name","props","merchant","Object","data","opened","loading","params","checkedRows","dataList","merchantList","computed","queryParams","assign","methods","download","showForm","productsCategory","parent","layerId","open","title","shadeClose","area","content","ProductsCategoryForm","list","onClose","close","onSuccess","doSearch","loadList","ProductsCategory","then","finally","doRemove","row","onConfirm","remove","id","init","created"],"sources":["D:\\DevWorks\\jxc\\merchant\\merchant-front\\src\\views\\basic\\ProductCategoryList.vue"],"sourcesContent":["<template>\r\n  <div class=\"frame-page\" style=\"margin: 0\">\r\n    <div class=\"h-panel\">\r\n      <div class=\"h-panel-body\">\r\n        <div class=\"table-toolbar\">\r\n          <div class=\"table-toolbar-left\">\r\n            <div class=\"h-input-group\">\r\n              <Search\r\n                  v-model=\"params.name\"\r\n                  search-button-theme=\"h-btn-default\"\r\n                  show-search-button\r\n                  class=\"w-360px pl-8px\"\r\n                  placeholder=\"请输入商品分类名称\"\r\n                  @search=\"doSearch\">\r\n                <i class=\"h-icon-search\"/>\r\n              </Search>\r\n            </div>\r\n          </div>\r\n          <div class=\"table-toolbar-right\">\r\n<!--            <Button @click=\"download()\" color=\"green\">导 出</Button>-->\r\n            <Button @click=\"showForm()\" color=\"primary\">新 增</Button>\r\n<!--            <Button @click=\"showImport()\" color=\"green\">导 入</Button>-->\r\n          </div>\r\n        </div>\r\n        <vxe-table row-id=\"id\"\r\n                   :stripe=\"false\"\r\n                   :tree-config=\"{transform:true, rowField: 'id', parentField: 'pid'}\"\r\n                   ref=\"table\"\r\n                   :data=\"dataList\"\r\n                   highlight-hover-row\r\n                   show-overflow\r\n                   :row-config=\"{height: 48}\"\r\n                   :loading=\"loading\">\r\n          <vxe-column type=\"seq\" width=\"80\" title=\"#\"/>\r\n          <vxe-column title=\"编码\" field=\"code\" align=\"left\" width=\"100\"/>\r\n          <vxe-column title=\"排序\" field=\"sort\" align=\"left\" width=\"100\"/>\r\n          <vxe-column title=\"图片\" width=\"400\" field=\"imgPath\">\r\n            <template #default=\"{row}\">\r\n              <div class=\"flex\">\r\n                <div class=\"flex\">\r\n                  <img v-if=\"row.imgPath\" :src=\"row.imgPath\" style=\"width: 40px;height: 40px;\">\r\n                  <img v-else src=\"@/assets/good-img-bg.png\" style=\"height: 40px;width: 40px\"/>\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </vxe-column>\r\n          <vxe-column title=\"名称\" field=\"name\" tree-node align=\"left\"/>\r\n          <vxe-column title=\"操作\" align=\"center\" width=\"200\" fixed=\"right\">\r\n            <template #default=\"{row}\">\r\n              <div class=\"flex items-center justify-center\">\r\n                <span class=\" primary-color text-hover ml-10px\" @click=\"showForm(null,row)\" size=\"s\">创建下级</span>\r\n                <i class=\"primary-color h-icon-edit ml-10px\" @click=\"showForm(row)\"></i>\r\n                <i class=\"primary-color h-icon-trash ml-10px\" @click=\"doRemove(row)\"></i>\r\n              </div>\r\n            </template>\r\n          </vxe-column>\r\n        </vxe-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {confirm, message} from \"heyui.ext\";\r\nimport {layer} from \"@layui/layer-vue\";\r\nimport {h} from \"vue\";\r\nimport {downloadBlob} from \"download.js\";\r\nimport ProductCategory from \"@js/api/ProductCategory\";\r\nimport ProductCategoryForm from \"@views/basic/ProductCategoryForm.vue\";\r\n\r\nexport default {\r\n  name: \"ProductCategory\",\r\n  props: {\r\n    merchant: Object,\r\n  },\r\n  data() {\r\n    return {\r\n      opened: true,\r\n      loading: false,\r\n      params: {\r\n        name: null,\r\n      },\r\n      checkedRows: [],\r\n      dataList: [],\r\n      merchantList: [],\r\n    }\r\n  },\r\n  computed: {\r\n    queryParams() {\r\n      return Object.assign(this.params, {})\r\n    }\r\n  },\r\n  methods: {\r\n    download() {\r\n\r\n    },\r\n    showForm(productsCategory, parent) {\r\n      let layerId = layer.open({\r\n        title: \"分类信息\",\r\n        shadeClose: false,\r\n        area: ['450px', '420px'],\r\n        content: h(ProductsCategoryForm, {\r\n          productsCategory, parent, list: this.dataList,\r\n          onClose: () => {\r\n            layer.close(layerId);\r\n          },\r\n          onSuccess: () => {\r\n            this.doSearch();\r\n            layer.close(layerId);\r\n          }\r\n        })\r\n      });\r\n    },\r\n    loadList() {\r\n      this.loading = true;\r\n      ProductsCategory.list(this.queryParams).then(({data}) => {\r\n        this.dataList = data;\r\n      }).finally(() => this.loading = false);\r\n    },\r\n    doSearch() {\r\n      this.loadList();\r\n    },\r\n    doRemove(row) {\r\n      confirm({\r\n        title: \"系统提示\",\r\n        content: `确认删除：${row.name}?`,\r\n        onConfirm: () => {\r\n          ProductsCategory.remove(row.id).then(() => {\r\n            message(\"删除成功~\");\r\n            this.doSearch();\r\n          })\r\n        }\r\n      })\r\n    },\r\n    init() {\r\n\r\n    }\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.doSearch();\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"AA+DA,SAAQA,OAAO,EAAEC,OAAO,QAAO,WAAW;AAC1C,SAAQC,KAAK,QAAO,kBAAkB;AACtC,SAAQC,CAAC,QAAO,KAAK;AACrB,SAAQC,YAAY,QAAO,aAAa;AACxC,OAAOC,eAAc,MAAO,yBAAyB;AACrD,OAAOC,mBAAkB,MAAO,sCAAsC;AAEtE,eAAe;EACbC,IAAI,EAAE,iBAAiB;EACvBC,KAAK,EAAE;IACLC,QAAQ,EAAEC;EACZ,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,IAAI;MACZC,OAAO,EAAE,KAAK;MACdC,MAAM,EAAE;QACNP,IAAI,EAAE;MACR,CAAC;MACDQ,WAAW,EAAE,EAAE;MACfC,QAAQ,EAAE,EAAE;MACZC,YAAY,EAAE;IAChB;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,WAAWA,CAAA,EAAG;MACZ,OAAOT,MAAM,CAACU,MAAM,CAAC,IAAI,CAACN,MAAM,EAAE,CAAC,CAAC;IACtC;EACF,CAAC;EACDO,OAAO,EAAE;IACPC,QAAQA,CAAA,EAAG,CAEX,CAAC;IACDC,QAAQA,CAACC,gBAAgB,EAAEC,MAAM,EAAE;MACjC,IAAIC,OAAM,GAAIxB,KAAK,CAACyB,IAAI,CAAC;QACvBC,KAAK,EAAE,MAAM;QACbC,UAAU,EAAE,KAAK;QACjBC,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC;QACxBC,OAAO,EAAE5B,CAAC,CAAC6B,oBAAoB,EAAE;UAC/BR,gBAAgB;UAAEC,MAAM;UAAEQ,IAAI,EAAE,IAAI,CAACjB,QAAQ;UAC7CkB,OAAO,EAAEA,CAAA,KAAM;YACbhC,KAAK,CAACiC,KAAK,CAACT,OAAO,CAAC;UACtB,CAAC;UACDU,SAAS,EAAEA,CAAA,KAAM;YACf,IAAI,CAACC,QAAQ,CAAC,CAAC;YACfnC,KAAK,CAACiC,KAAK,CAACT,OAAO,CAAC;UACtB;QACF,CAAC;MACH,CAAC,CAAC;IACJ,CAAC;IACDY,QAAQA,CAAA,EAAG;MACT,IAAI,CAACzB,OAAM,GAAI,IAAI;MACnB0B,gBAAgB,CAACN,IAAI,CAAC,IAAI,CAACd,WAAW,CAAC,CAACqB,IAAI,CAAC,CAAC;QAAC7B;MAAI,CAAC,KAAK;QACvD,IAAI,CAACK,QAAO,GAAIL,IAAI;MACtB,CAAC,CAAC,CAAC8B,OAAO,CAAC,MAAM,IAAI,CAAC5B,OAAM,GAAI,KAAK,CAAC;IACxC,CAAC;IACDwB,QAAQA,CAAA,EAAG;MACT,IAAI,CAACC,QAAQ,CAAC,CAAC;IACjB,CAAC;IACDI,QAAQA,CAACC,GAAG,EAAE;MACZ3C,OAAO,CAAC;QACN4B,KAAK,EAAE,MAAM;QACbG,OAAO,EAAE,QAAQY,GAAG,CAACpC,IAAI,GAAG;QAC5BqC,SAAS,EAAEA,CAAA,KAAM;UACfL,gBAAgB,CAACM,MAAM,CAACF,GAAG,CAACG,EAAE,CAAC,CAACN,IAAI,CAAC,MAAM;YACzCvC,OAAO,CAAC,OAAO,CAAC;YAChB,IAAI,CAACoC,QAAQ,CAAC,CAAC;UACjB,CAAC;QACH;MACF,CAAC;IACH,CAAC;IACDU,IAAIA,CAAA,EAAG,CAEP;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACD,IAAI,CAAC,CAAC;IACX,IAAI,CAACV,QAAQ,CAAC,CAAC;EACjB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}