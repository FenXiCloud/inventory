{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\n/**\r\n * @功能描述: 门店账号需要控制权限\r\n * @创建时间: 2023年08月08日\r\n * @公司官网: www.fenxi365.com\r\n * @公司信息: 纷析云（杭州）科技有限公司\r\n * @公司介绍: 专注于财务相关软件开发, 企业会计自动化解决方案\r\n */\nimport store from \"@/js/store\";\nexport default {\n  mounted(el, binding) {\n    //门店账号需要控制权限\n    if (store.state.user.role.accountBookId) {\n      const {\n        value\n      } = binding;\n      if (value && value instanceof Array && value.length > 0) {\n        const hasPermission = store.state.granted.some(role => {\n          return value.includes(role);\n        });\n        if (!hasPermission) {\n          el.parentNode && el.parentNode.removeChild(el);\n        }\n      } else if (value && typeof value === 'string') {\n        if (!store.state.granted.includes(value)) {\n          el.parentNode && el.parentNode.removeChild(el);\n        }\n      } else {\n        throw new Error(`need permission! Like v-auth=\"['create','editor']\" or v-auth=\"'create'\"`);\n      }\n    }\n  }\n};","map":{"version":3,"names":["store","mounted","el","binding","state","user","role","accountBookId","value","Array","length","hasPermission","granted","some","includes","parentNode","removeChild","Error"],"sources":["D:/DevWorks/jxc/merchant/merchant-front/src/js/directive.js"],"sourcesContent":["/**\r\n * @功能描述: 门店账号需要控制权限\r\n * @创建时间: 2023年08月08日\r\n * @公司官网: www.fenxi365.com\r\n * @公司信息: 纷析云（杭州）科技有限公司\r\n * @公司介绍: 专注于财务相关软件开发, 企业会计自动化解决方案\r\n */\r\nimport store from \"@/js/store\";\r\n\r\nexport default {\r\n  mounted(el, binding) {\r\n    //门店账号需要控制权限\r\n    if (store.state.user.role.accountBookId) {\r\n      const {value} = binding\r\n      if (value && value instanceof Array && value.length > 0) {\r\n        const hasPermission = store.state.granted.some(role => {\r\n          return value.includes(role)\r\n        })\r\n        if (!hasPermission) {\r\n          el.parentNode && el.parentNode.removeChild(el)\r\n        }\r\n      } else if (value && typeof value === 'string') {\r\n        if (!store.state.granted.includes(value)) {\r\n          el.parentNode && el.parentNode.removeChild(el);\r\n        }\r\n      } else {\r\n        throw new Error(`need permission! Like v-auth=\"['create','editor']\" or v-auth=\"'create'\"`)\r\n      }\r\n    }\r\n  }\r\n}"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,MAAM,YAAY;AAE9B,eAAe;EACbC,OAAOA,CAACC,EAAE,EAAEC,OAAO,EAAE;IACnB;IACA,IAAIH,KAAK,CAACI,KAAK,CAACC,IAAI,CAACC,IAAI,CAACC,aAAa,EAAE;MACvC,MAAM;QAACC;MAAK,CAAC,GAAGL,OAAO;MACvB,IAAIK,KAAK,IAAIA,KAAK,YAAYC,KAAK,IAAID,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE;QACvD,MAAMC,aAAa,GAAGX,KAAK,CAACI,KAAK,CAACQ,OAAO,CAACC,IAAI,CAACP,IAAI,IAAI;UACrD,OAAOE,KAAK,CAACM,QAAQ,CAACR,IAAI,CAAC;QAC7B,CAAC,CAAC;QACF,IAAI,CAACK,aAAa,EAAE;UAClBT,EAAE,CAACa,UAAU,IAAIb,EAAE,CAACa,UAAU,CAACC,WAAW,CAACd,EAAE,CAAC;QAChD;MACF,CAAC,MAAM,IAAIM,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;QAC7C,IAAI,CAACR,KAAK,CAACI,KAAK,CAACQ,OAAO,CAACE,QAAQ,CAACN,KAAK,CAAC,EAAE;UACxCN,EAAE,CAACa,UAAU,IAAIb,EAAE,CAACa,UAAU,CAACC,WAAW,CAACd,EAAE,CAAC;QAChD;MACF,CAAC,MAAM;QACL,MAAM,IAAIe,KAAK,CAAC,yEAAyE,CAAC;MAC5F;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}