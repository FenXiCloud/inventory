import{openBlock as r,createElementBlock as a,createElementVNode as u,normalizeStyle as h,Fragment as f,renderList as v,normalizeClass as n,createCommentVNode as y,renderSlot as d,createVNode as T,Transition as p,withCtx as k}from"vue";import{_ as I}from"./_plugin-vue_export-helper.js";const C={name:"HCarousel",emits:["clickItem","change"],props:{height:{type:Number,default:300},speed:{type:Number,default:3e3},autoplay:{type:Boolean,default:!0},changeSpeed:{type:Number,default:500},arrow:{type:String,default:"hover"},pageTheme:{type:String,default:"square"},datas:Array,isHoverStop:{type:Boolean,default:!0},paginationTrigger:{type:String,default:"click"},effect:{type:String,default:"scroll"}},data(){return{activeIndex:1,scrollTimeout:null,redirectTimeout1:null,redirectTimeout2:null}},computed:{carouselList(){if(this.datas.length==0)return[];let t=this.datas;return[t[this.datas.length-1],...t,t[0]]},carouselItem(){return this.carouselList[this.activeIndex-1]},paginationCls(){return`h-carousel-pagination-${this.pageTheme}`},arrowCls(){return`h-carousel-arrow-${this.arrow}`}},watch:{autoplay(){this.autoplay?this.startAutoplay(!0):this.stopAutoplay(!0)},effect(){clearTimeout(this.scrollTimeout),clearTimeout(this.redirectTimeout1),clearTimeout(this.redirectTimeout2),this.init()}},mounted(){this.$nextTick(()=>{this.init()})},beforeUnmount(){clearTimeout(this.scrollTimeout),clearTimeout(this.redirectTimeout1),clearTimeout(this.redirectTimeout2),window.removeEventListener("resize",this.resizeEvent)},methods:{clickTrigger(t,e){this.$emit("clickItem",t,e)},isActive(t){let e=this.datas,l=this.activeIndex;return t+1==l||l==0&&t==e.length-1||l==e.length+1&&t==0},init(){this.startAutoplay(!0),setTimeout(()=>{this.change({index:this.activeIndex,immediately:!0})},300),window.addEventListener("resize",this.resizeEvent,!1)},stopAutoplay(t=!1){(this.isHoverStop||t)&&clearTimeout(this.scrollTimeout)},startAutoplay(t=!1){(this.isHoverStop||t)&&this.autoplay&&(clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.next()},this.speed))},resizeEvent(){this.change({index:this.activeIndex,immediately:!0})},scroll(t,e){this.activeIndex=t;let l=this.$el.clientWidth,m=t*l;if(this.effect==="scroll"){let c=this.$el.querySelector(".h-carousel-scroll-list");e?c.style.transitionDuration="0ms":c.style.transitionDuration=`${this.changeSpeed}ms`,c.style.transform=`translate3d(${-m}px, 0px, 0px)`}},change({index:t=1,immediately:e=!1}){this.activeIndex==this.carouselList.length-1?this.scroll(1,!0):this.activeIndex==0&&this.scroll(this.carouselList.length-2,!0),clearTimeout(this.scrollTimeout),clearTimeout(this.redirectTimeout1),clearTimeout(this.redirectTimeout2),e?this.scroll(t,e):(this.scroll(t,e),this.$emit("change",t,this.carouselList[this.activeIndex]),this.activeIndex==this.carouselList.length-1?this.redirectTimeout1=setTimeout(()=>{this.scroll(1,!0)},this.changeSpeed+100):this.activeIndex==0&&(this.redirectTimeout2=setTimeout(()=>{this.scroll(this.carouselList.length-2,!0)},this.changeSpeed+100))),this.startAutoplay(!0)},changePageByStep(t){let e=this.activeIndex+t;e>=this.carouselList.length?e=2:e<0&&(e=this.carouselList.length-3),this.change({index:e})},triggerChange(t,e){this.paginationTrigger==t&&this.change({index:e})},prev(){this.changePageByStep(-1)},next(){this.changePageByStep(1)}}},x={class:"h-carousel"},A=["onClick"],S=u("i",{class:"h-icon-left"},null,-1),w=[S],L=u("i",{class:"h-icon-right"},null,-1),b=[L],z=["onMouseover","onClick"],B={key:1};function E(t,e,l,m,c,s){return r(),a("div",x,[u("div",{class:"h-carousel-container",style:h({height:`${l.height}px`})},[l.effect=="scroll"?(r(),a("div",{key:l.effect,class:"h-carousel-list h-carousel-scroll-list",onMouseover:e[0]||(e[0]=(...i)=>s.stopAutoplay&&s.stopAutoplay(...i)),onMouseout:e[1]||(e[1]=(...i)=>s.startAutoplay&&s.startAutoplay(...i))},[(r(!0),a(f,null,v(s.carouselList,(i,o)=>(r(),a("div",{key:o,class:"h-carousel-item",onClick:g=>s.clickTrigger(o,i)},[t.$slots.item?y("",!0):(r(),a("div",{key:0,class:n(["h-carousel-bg",{"h-carousel-bg-pointer":i.link}]),style:h({backgroundImage:`url(${i.image})`})},null,6)),d(t.$slots,"item",{carousel:i,index:o})],8,A))),128))],32)):(r(),a("div",{key:l.effect,class:"h-carousel-list",onMouseover:e[3]||(e[3]=(...i)=>s.stopAutoplay&&s.stopAutoplay(...i)),onMouseout:e[4]||(e[4]=(...i)=>s.startAutoplay&&s.startAutoplay(...i))},[T(p,{name:`h-carousel-effect-${l.effect}`},{default:k(()=>[(r(),a("div",{key:c.activeIndex,class:"h-carousel-item h-carousel-effect-item",onClick:e[2]||(e[2]=i=>s.clickTrigger(c.activeIndex,s.carouselItem))},[t.$slots.item?y("",!0):(r(),a("div",{key:0,class:n(["h-carousel-bg",{"h-carousel-bg-pointer":s.carouselItem.link}]),style:h({backgroundImage:`url(${s.carouselItem.image})`})},null,6)),d(t.$slots,"item",{carousel:s.carouselItem})]))]),_:3},8,["name"])],32)),u("div",{class:n(["h-carousel-arrow",s.arrowCls])},[u("div",{class:"h-carousel-arrow-left",onClick:e[5]||(e[5]=(...i)=>s.prev&&s.prev(...i))},w),u("div",{class:"h-carousel-arrow-right",onClick:e[6]||(e[6]=(...i)=>s.next&&s.next(...i))},b)],2)],4),u("ul",{class:n(["h-carousel-pagination",s.paginationCls])},[(r(!0),a(f,null,v(l.datas,(i,o)=>(r(),a("li",{key:o,class:n(["h-carousel-pagination-item",{active:s.isActive(o)}]),onMouseover:g=>s.triggerChange("hover",o+1),onClick:g=>s.triggerChange("click",o+1)},[t.$slots.page?d(t.$slots,"page",{key:0,carousel:i}):(r(),a("span",B))],42,z))),128))],2)])}const _=I(C,[["render",E]]);export{_ as C};
