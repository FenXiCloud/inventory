import y from"./utils/config.js";import p from"./plugins/draggable.js";import{openBlock as a,createBlock as g,Teleport as k,createElementVNode as m,normalizeClass as $,createElementBlock as n,createCommentVNode as r,withModifiers as v,createVNode as b,Transition as w,withCtx as B,toDisplayString as S,renderSlot as c}from"vue";import{_}from"./_plugin-vue_export-helper.js";const o="h-modal",d="h-notify",C={name:"HModal",emits:["open","close","update:modelValue"],props:{hasCloseIcon:{type:Boolean,default:!1},hasMask:{type:Boolean,default:!0},hasDivider:{type:Boolean,default:()=>y.getOption("modal","hasDivider")},closeOnMask:{type:Boolean,default:!0},middle:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},className:String,type:String,title:String},data(){return{isOpened:this.modelValue,isShow:this.modelValue,el:null}},computed:{noticeCls(){return{[o]:!0,[d]:!0,[`${o}-type-default`]:!this.type,[`${d}-show`]:this.isOpened,[`${d}-has-mask`]:this.hasMask,[`${d}-no-mask`]:!this.hasMask,[`${d}-has-close`]:this.hasCloseIcon,[`${d}-draggable`]:this.draggable,[`${o}-has-divider`]:this.hasDivider,[`${o}-container-center`]:!!this.middle,[`${o}-type-${this.type}`]:this.type,[`${o}-transparent`]:this.transparent,[`${o}-full-screen`]:this.fullScreen,[this.className]:!!this.className}},hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}},watch:{modelValue(){this.modelValue?this.show():this.hide()},draggable(){this.doDraggable()}},mounted(){let e=this.$refs.modal;this.modelElement=e,this.$nextTick(()=>{this.modelValue||(e.style.display="none"),this.doDraggable()})},beforeUnmount(){let e=this.modelElement;e&&(e.style.display="none",this.removeDraggable())},methods:{removeDraggable(){this.drag&&this.drag.destroy()},doDraggable(){if(this.drag&&this.drag.destroy(),!this.draggable)return;const e=this.modelElement.querySelector(".h-notify-container");if(!e)return;let t=0,l=0,i=null,h=e.querySelector(".h-modal-header");h&&(this.drag=new p(h,{start(s){t=s.clientX,l=s.clientY,i=e.getBoundingClientRect(),e.style.left=`${i.left}px`,e.style.top=`${i.top}px`,e.style.transform="initial",e.style.transition="none"},drag(s){let f=s.clientX-t,u=s.clientY-l;e.style.left=`${i.left+f}px`,e.style.top=`${i.top+u}px`}}))},show(){let e=this.modelElement;if(e.style.display="block",this.isShow=!0,this.hasMask){let t=document.documentElement,l=window.innerWidth-t.clientWidth;t.style.overflow="hidden",t.style.paddingRight=`${l}px`}setTimeout(()=>{this.isOpened=!0,this.doDraggable(),this.$emit("open")},100)},hide(){let e=this.modelElement;this.isOpened=!1,setTimeout(()=>{e.style.display="none",this.isShow=!1,this.removeDraggable(),this.$emit("close")},200);let t=document.documentElement;t.style.overflow="",t.style.paddingRight=""},setvalue(e){(!e||e&&this.hasMask&&this.closeOnMask)&&this.$emit("update:modelValue",!1)}}},D={key:0,class:"h-notify-container"},M={class:"h-notify-content"},V={key:1,class:"h-modal-header"},x={key:0,class:"h-modal-title"},E={class:"h-notify-body"},O={key:2,class:"h-modal-footer"};function N(e,t,l,i,h,s){return a(),g(k,{to:"body"},[m("div",{ref:"modal",class:$(s.noticeCls)},[l.hasMask?(a(),n("div",{key:0,class:"h-notify-mask",onClick:t[0]||(t[0]=f=>s.setvalue(!0))})):r("",!0),m("div",{class:"h-notify-wrap",onClick:t[2]||(t[2]=v(f=>s.setvalue(!0),["self"]))},[b(w,{name:l.type,persisted:!1},{default:B(()=>[h.isShow?(a(),n("div",D,[m("div",M,[l.hasCloseIcon?(a(),n("span",{key:0,class:"h-notify-close h-icon-close",onClick:t[1]||(t[1]=f=>s.setvalue(!1))})):r("",!0),s.hasHeader||l.title?(a(),n("header",V,[l.title?(a(),n("span",x,S(l.title),1)):r("",!0),c(e.$slots,"header")])):r("",!0),m("div",E,[c(e.$slots,"default")]),s.hasFooter?(a(),n("footer",O,[c(e.$slots,"footer")])):r("",!0)])])):r("",!0)]),_:3},8,["name"])])],2)])}const W=_(C,[["render",N]]);export{W as M};
