var S=Object.defineProperty;var z=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var f=(t,e,r)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,N=(t,e)=>{for(var r in e||(e={}))V.call(e,r)&&f(t,r,e[r]);if(z)for(var r of z(e))k.call(e,r)&&f(t,r,e[r]);return t};import o from"./utils/config.js";import{u as y}from"./utils.js";import x from"./mixins/locale.js";import w from"./plugins/message.js";import{S as O}from"./select.js";import{resolveComponent as b,openBlock as i,createElementBlock as n,normalizeClass as h,normalizeStyle as d,createTextVNode as C,toDisplayString as c,createElementVNode as p,createCommentVNode as g,createBlock as j,Fragment as _,renderList as P,withKeys as B}from"vue";import{_ as F}from"./_plugin-vue_export-helper.js";const u="h-page",M={name:"HPagination",components:{Select:O},emits:["input","change","update:modelValue","changeSize"],mixins:[x],props:{size:{type:Number,default:()=>o.getOption("page.size")},sizes:{type:Array,default:()=>o.getOption("page.sizes")},align:{type:String,default:"left"},cur:{type:Number,default:1},total:{type:Number,default:0},pagerSize:{type:Number,default:5},small:{type:Boolean,default:()=>o.getOption("page.small")},layout:{type:String,default:()=>o.getOption("page.layout")},modelValue:{type:Object,default:()=>({})}},data(){let t=this.layout.replace(" ","").split(","),e={total:-1,pager:-1,jumper:-1,sizes:-1};for(let r in e)e[r]=t.indexOf(r);return{sizeNow:this.modelValue.size||this.size,orders:e,curValue:null}},computed:{sizesShow(){const t=o.getOption("dict","keyName"),e=o.getOption("dict","titleName");return this.sizes.map(r=>({[t]:r,[e]:this.hlang("h.pagination.sizeOfPage",{size:r})}))},curNow(){return this.curValue||this.modelValue.page||this.cur},totalNow(){return this.modelValue.total||this.total||0},count(){return Math.ceil(this.totalNow/this.sizeNow)},pagers(){if(this.count<3)return[];let t=this.curNow-Math.floor(this.pagerSize/2);t=Math.max(2,t);let e=t+this.pagerSize-1;e=Math.min(this.count-1,e),t=Math.min(t,e-this.pagerSize+1),t=Math.max(2,t);let r=[];for(let m=t;m<=e;m++)r.push(m);return r},prefix(){return u},prevCls(){return{[`${u}-pager-disabled`]:this.curNow==1,"h-page-pager":!0}},nextCls(){return{[`${u}-pager-disabled`]:this.curNow==this.count,"h-page-pager":!0}},pagerCls(){return{[`${u}-pager`]:!0}},pageCls(){return{[`${u}`]:!0,[`${u}-small`]:this.small,[`${u}-align-${this.align}`]:!!this.align}},containerCls(){return{}},noticeCls(){return{}}},watch:{cur(){this.curValue=null},size(){this.sizeNow=this.modelValue.size||this.size},"modelValue.page"(){this.curValue=null},"modelValue.size"(){this.sizeNow=this.modelValue.size||this.size}},methods:{prev(){this.curNow!=1&&this.change(this.curNow-1)},next(){this.curNow!=this.count&&this.change(this.curNow+1)},jump(t){let e=parseInt(t.target.value,10);if(isNaN(e)){w.error(this.hlang("h.pagination.incorrectFormat"));return}if(e>this.count||e<1){w.error(this.hlang("h.pagination.overSize"));return}let r=parseInt(t.target.value,10);r!=(this.modelValue.page||this.cur)&&this.setvalue({cur:r,size:this.sizeNow})},change(t){if(this.curNow==t)return;let e=o.getOption("page.onChange");y.isFunction(e)&&e({cur:t,size:this.sizeNow}),this.setvalue({cur:t,size:this.sizeNow})},setvalue(t){let e={page:t.cur,total:this.totalNow};Object.assign(e,t),this.curValue=t.cur;let r=N({},e);delete r.cur,this.$emit("input",r),this.$emit("update:modelValue",r),this.$emit("change",e)},changeSize(){this.setvalue({cur:1,size:this.sizeNow}),this.$emit("changeSize",this.sizeNow);let t=o.getOption("page.onChangeSize");y.isFunction(t)&&t(this.sizeNow)},genPagerCls(t){return{[`${u}-pager`]:!0,[`${u}-pager-selected`]:this.curNow==t}}}},E=p("i",{class:"h-icon-angle-left"},null,-1),L=[E],A={key:0,class:"h-page-pager h-page-ellipsis"},I=["onClick"],K={key:1,class:"h-page-pager h-page-ellipsis"},D=p("i",{class:"h-icon-angle-right"},null,-1),H=[D],T=["value"];function U(t,e,r,m,a,s){const v=b("Select");return i(),n("div",{class:h(s.pageCls)},[a.orders.total!=-1?(i(),n("span",{key:0,class:h(s.prefix+"-total"),style:d({order:a.orders.total})},[C(c(t.hlang("h.pagination.totalBefore"))+" ",1),p("span",{class:h(s.prefix+"-total-num")},c(s.totalNow),3),C(" "+c(t.hlang("h.pagination.totalAfter")),1)],6)):g("",!0),a.orders.sizes!=-1?(i(),j(v,{key:1,modelValue:a.sizeNow,"onUpdate:modelValue":e[0]||(e[0]=l=>a.sizeNow=l),"no-border":r.small,autosize:!0,deletable:!1,datas:s.sizesShow,style:d({order:a.orders.sizes}),class:"h-page-select-size",onChange:s.changeSize},null,8,["modelValue","no-border","datas","style","onChange"])):g("",!0),a.orders.pager!=-1&&this.count>0?(i(),n("span",{key:2,class:"h-page-pager-container",style:d({order:a.orders.pager})},[p("span",{class:h(s.prevCls),onClick:e[1]||(e[1]=l=>s.prev())},L,2),p("span",{class:h(s.genPagerCls(1)),onClick:e[2]||(e[2]=l=>s.change(1))},"1",2),s.pagers.length>0&&1<s.pagers[0]-1?(i(),n("span",A,"...")):g("",!0),(i(!0),n(_,null,P(s.pagers,l=>(i(),n("span",{key:l,class:h(s.genPagerCls(l)),onClick:q=>s.change(l)},c(l),11,I))),128)),s.pagers.length>0&&s.count>s.pagers[s.pagers.length-1]+1?(i(),n("span",K,"...")):g("",!0),this.count>1?(i(),n("span",{key:2,class:h(s.genPagerCls(s.count)),onClick:e[3]||(e[3]=l=>s.change(s.count))},c(s.count),3)):g("",!0),p("span",{class:h(s.nextCls),onClick:e[4]||(e[4]=l=>s.next())},H,2)],4)):g("",!0),a.orders.jumper!=-1&&s.count>0?(i(),n("input",{key:3,type:"text",style:d({order:a.orders.jumper}),class:"h-page-jumper-input h-input",value:s.curNow,onBlur:e[5]||(e[5]=(...l)=>s.jump&&s.jump(...l)),onKeyup:e[6]||(e[6]=B((...l)=>s.jump&&s.jump(...l),["enter"]))},null,44,T)):g("",!0)],2)}const $=F(M,[["render",U]]);export{$ as P};
