import{u}from"./utils.js";import f from"./mixins/locale.js";import h from"./plugins/message.js";import{openBlock as r,createElementBlock as s,normalizeClass as g,Fragment as y,renderList as v,createElementVNode as c,toDisplayString as V,withModifiers as w,createCommentVNode as m,withDirectives as C,withKeys as p,vModelText as b}from"vue";import{_ as k}from"./_plugin-vue_export-helper.js";const o="h-taginput",B={name:"HTagInput",mixins:[f],emits:["input","change","update:modelValue"],props:{readonly:{type:Boolean,default:!1},noBorder:{type:Boolean,default:!1},placeholder:{type:String},type:{type:String,default:"Array"},split:{type:String,default:","},wordlimit:{type:Number,default:50},limit:{type:Number,default:1e4},modelValue:[Array,String,Number]},data(){return{focusing:!1,tagvalue:""}},computed:{taginputCls(){return{[`${o}`]:!0,[`${o}-input-border`]:!this.noBorder&&!this.readonly,[`${o}-readonly`]:this.readonly,focusing:this.focusing}},values(){return this.type=="Array"?this.modelValue||[]:u.isNull(this.modelValue)||this.modelValue===""?[]:String(this.modelValue).split(this.split)}},methods:{removeLast(e){e.target.value===""&&this.values.length&&this.remove(this.values.length-1)},remove(e){if(this.readonly)return;let t=u.copy(this.values);t.splice(e,1),this.setvalue(t)},add(){if(this.wordlimit<this.tagvalue.length)return h.error(this.hlang("h.wordlimit.warn",[this.wordlimit])),!1;if(this.limit<=this.values.length)return h.error(this.hlang("h.taginput.limitWords")),!1;if(this.readonly||this.tagvalue==="")return!1;let e=u.copy(this.values);e.push(this.tagvalue),this.setvalue(e)},setvalue(e){this.type=="string"&&(e.length==0?e=null:e=e.join(this.split)),this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e);let t=document.createEvent("CustomEvent");t.initCustomEvent("setvalue",!0,!0,e),this.$el.dispatchEvent(t),this.tagvalue=""},blur(){this.add(),this.focusing=!1}}},x=["onClick"],E=["placeholder"];function N(e,t,n,S,a,i){return r(),s("div",{class:g(i.taginputCls)},[(r(!0),s(y,null,v(i.values,(l,d)=>(r(),s("span",{key:l+d},[c("span",null,V(l),1),n.readonly?m("",!0):(r(),s("i",{key:0,class:"h-icon-close-min",onClick:w(L=>i.remove(d),["stop"])},null,8,x))]))),128)),n.readonly?m("",!0):C((r(),s("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=l=>a.tagvalue=l),type:"text",class:"h-taginput-input h-input",placeholder:n.placeholder,onFocus:t[1]||(t[1]=l=>a.focusing=!0),onBlur:t[2]||(t[2]=(...l)=>i.blur&&i.blur(...l)),onKeyup:t[3]||(t[3]=p((...l)=>i.add&&i.add(...l),["enter"])),onKeydown:t[4]||(t[4]=p((...l)=>i.removeLast&&i.removeLast(...l),["delete"]))},null,40,E)),[[b,a.tagvalue]])],2)}const F=k(B,[["render",N]]);export{F as T};
