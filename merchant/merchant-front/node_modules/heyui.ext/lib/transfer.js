import{C}from"./checkbox.js";import{S as b}from"./search.js";import{resolveComponent as g,openBlock as l,createElementBlock as r,createElementVNode as h,renderSlot as f,toDisplayString as d,createCommentVNode as u,createVNode as k,normalizeStyle as v,Fragment as c,renderList as S,withCtx as V,createTextVNode as m,normalizeClass as _}from"vue";import{_ as N}from"./_plugin-vue_export-helper.js";const H={name:"HTransfer",components:{Checkbox:C,Search:b},emits:["transfer","input","change","update:modelValue","init"],props:{modelValue:{type:Array,default:()=>[]},datas:{type:Array,default:()=>[]},keyName:{type:String,default:"key"},height:Number,option:{type:Object,default:()=>({})}},data(){return{ltChecked:[],rtChecked:[],ltSearchText:"",rtSearchText:"",key:this.keyName||"key"}},computed:{transferListStyle(){let s={};return this.height&&(s.height=`${this.height}px`),s},sources(){let s=this.modelValue||[],t=this.keyName||"key",e=this.datas.filter(a=>s.indexOf(a[t])==-1);return this.ltSearchText&&this.ltSearchText.trim()?e.filter(a=>a.text.indexOf(this.ltSearchText.trim())!=-1):e},targets(){let s=this.modelValue||[],t=this.keyName||"key",e=this.datas.filter(a=>s.indexOf(a[t])!=-1);return this.rtSearchText&&this.rtSearchText.trim()?e.filter(a=>a.text.indexOf(this.rtSearchText.trim())!=-1):e}},mounted(){this.$emit("init",this.sources,this.targets)},methods:{move(s){this.$emit("transfer",s,this.sources,this.targets);let t=this.modelValue?[...this.modelValue]:[];s===1&&this.ltChecked.length>0?(this.rtSearchText=null,t.push(...this.ltChecked),this.ltChecked.length=0):s===-1&&this.rtChecked.length>0&&(this.ltSearchText=null,this.rtChecked.forEach(e=>{t.splice(t.indexOf(e),1)}),this.rtChecked.length=0),this.$emit("input",t),this.$emit("change",t),this.$emit("update:modelValue",t)}}},O={class:"h-transfer"},p={class:"h-transfer-source"},I={key:0,class:"h-transfer-header"},L={key:0,class:"h-transfer-filter"},U={key:0,class:"h-transfer-item text-center"},E={class:"h-transfer-switch"},w={key:2,class:"h-icon-left"},z={key:2,class:"h-icon-right"},A={class:"h-transfer-target"},B={key:0,class:"h-transfer-header"},j={key:0,class:"h-transfer-filter"},D={key:0,class:"h-transfer-item text-center"};function F(s,t,e,a,n,o){const x=g("Search"),T=g("Checkbox");return l(),r("div",O,[h("div",p,[f(s.$slots,"sourceHeader",{},()=>[e.option&&e.option.ltHeadText?(l(),r("div",I,d(e.option.ltHeadText),1)):u("",!0)]),e.option.filterable&&(o.sources.length||n.ltSearchText)?(l(),r("div",L,[k(x,{modelValue:n.ltSearchText,"onUpdate:modelValue":t[0]||(t[0]=i=>n.ltSearchText=i),position:"front",placeholder:e.option.placeholder},null,8,["modelValue","placeholder"])])):u("",!0),h("div",{class:"h-transfer-list",style:v(o.transferListStyle)},[(l(!0),r(c,null,S(o.sources,i=>(l(),r("div",{key:i[n.key],class:"h-transfer-item"},[k(T,{modelValue:n.ltChecked,"onUpdate:modelValue":t[1]||(t[1]=y=>n.ltChecked=y),value:i[n.key],checked:!1},{default:V(()=>[f(s.$slots,"item",{option:i,type:"source"},()=>[e.option&&e.option.render?(l(),r(c,{key:0},[m(d(e.option.render(i)),1)],64)):(l(),r(c,{key:1},[m(d(i.text),1)],64))])]),_:2},1032,["modelValue","value"])]))),128)),o.sources.length===0?(l(),r("div",U,"\u65E0\u6570\u636E")):u("",!0)],4)]),h("div",E,[h("button",{class:"h-btn h-btn-s",type:"button",onClick:t[2]||(t[2]=i=>o.move(-1))},[e.option&&e.option.ltText?(l(),r(c,{key:0},[m(d(e.option.ltText),1)],64)):e.option&&e.option.ltIcon?(l(),r("i",{key:1,class:_(e.option.ltIcon)},null,2)):(l(),r("i",w))]),h("button",{class:"h-btn h-btn-s",type:"button",onClick:t[3]||(t[3]=i=>o.move(1))},[e.option&&e.option.rtText?(l(),r(c,{key:0},[m(d(e.option.rtText),1)],64)):e.option&&e.option.rtIcon?(l(),r("i",{key:1,class:_(e.option.rtIcon)},null,2)):(l(),r("i",z))])]),h("div",A,[f(s.$slots,"targetHeader",{},()=>[e.option&&e.option.rtHeadText?(l(),r("div",B,d(e.option.rtHeadText),1)):u("",!0)]),e.option.filterable&&(o.targets.length||n.rtSearchText)?(l(),r("div",j,[k(x,{modelValue:n.rtSearchText,"onUpdate:modelValue":t[4]||(t[4]=i=>n.rtSearchText=i),position:"front",placeholder:e.option.placeholder},null,8,["modelValue","placeholder"])])):u("",!0),h("div",{class:"h-transfer-list",style:v(o.transferListStyle)},[(l(!0),r(c,null,S(o.targets,i=>(l(),r("div",{key:i[n.key],class:"h-transfer-item"},[h("label",null,[k(T,{modelValue:n.rtChecked,"onUpdate:modelValue":t[5]||(t[5]=y=>n.rtChecked=y),value:i[n.key]},{default:V(()=>[f(s.$slots,"item",{option:i,type:"target"},()=>[e.option&&e.option.render?(l(),r(c,{key:0},[m(d(e.option.render(i)),1)],64)):(l(),r(c,{key:1},[m(d(i.text),1)],64))])]),_:2},1032,["modelValue","value"])])]))),128)),o.targets.length===0?(l(),r("div",D,"\u65E0\u6570\u636E")):u("",!0)],4)])])}const M=N(H,[["render",F]]);export{M as T};
